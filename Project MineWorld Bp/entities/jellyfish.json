//Project MineWorld Jellyfish v1
{
   "format_version": "1.16.0",
   "minecraft:entity": {
      "description": {
         "identifier": "mineworld:jellyfish",
         "is_experimental": false,
         "is_spawnable": true,
         "is_summonable": true
      },
      "component_groups": {

         "mineworld:behavior.aggresive": {
            "minecraft:behavior.melee_attack": { "priority": 2, "speed_multiplier": 1, "track_target": true },
            "minecraft:behavior.nearest_attackable_target": {
               "entity_types": [
                  {
                     "filters": {
                        "any_of": [
                           { "subject": "other", "test": "is_family", "value": "player" },
                           { "subject": "other", "test": "is_family", "value": "squid" },
                           { "subject": "other", "test": "is_family", "value": "cod" },
                           { "subject": "other", "test": "is_family", "value": "tropicalfish" },
                           { "subject": "other", "test": "is_family", "value": "salmon" },
                           { "subject": "other", "test": "is_family", "value": "drowned" }
                        ]
                     },
                     "max_dist": 10
                  }
               ],
               "must_see": true,
               "priority": 5,
               "reselect_targets": true,
               "within_radius": 25
            }
         },
         
         "mineworld.size:normal": { "minecraft:health": { "max": 8, "value": 8 } },
         "mineworld.size:big": {
            "minecraft:health": { "max": 15, "value": 15 },
            "minecraft:scale": { "value": 2 }
         },
         "mineworld.size:small": {
            "minecraft:health": { "max": 5, "value": 5 },
            "minecraft:scale": { "value": 0.5 }
         },

         "chironex": {
            "minecraft:attack": {
               "damage": 4,
               "effect_duration": 5,
               "effect_name": "poison"
            },
            "minecraft:loot": { "table": "loot_tables/entities/chironex.json" },
            "minecraft:skin_id": { "value": 0 },
            "minecraft:type_family": { "family": [ "jellyfish", "chironex" ] }
         },
         "chrysaora": {
            "minecraft:attack": { "damage": 8 },
            "minecraft:loot": { "table": "loot_tables/entities/chrysaora.json" },
            "minecraft:skin_id": { "value": 1 },
            "minecraft:type_family": { "family": [ "jellyfish", "chrysaora" ] }
         },
         "rhizostoma": {
            "minecraft:attack": { "damage": 8 },
            "minecraft:loot": { "table": "loot_tables/entities/rhizostoma.json" },
            "minecraft:skin_id": { "value": 2 },
            "minecraft:type_family": { "family": [ "jellyfish", "rhizostoma" ] }
         },
         "cotylorhiza": {
            "minecraft:attack": { "damage": 8},
            "minecraft:loot": { "table": "loot_tables/entities/rhizostoma.json" },
            "minecraft:skin_id": { "value": 3 },
            "minecraft:type_family": { "family": [ "jellyfish", "cotylorhiza" ] }
         }
      },
      "components": {
         //#region Sea entity pre-assets
         "minecraft:nameable": {},
         "minecraft:behavior.random_swim": {
            "priority": 3,
            "interval": 0,
            "speed_multiplier": 1,
            "xz_dist": 16,
            "y_dist": 4
         },
         "minecraft:behavior.swim_wander": {
            "interval": 10,
            "look_ahead": 2,
            "priority": 4,
            "speed_multiplier": 1
         },
         "minecraft:behavior.swim_idle": { "priority": 5 },
         "minecraft:breathable": {
            "breathes_air": false,
            "breathes_water": true,
            "suffocate_time": 0,
            "total_supply": 15
         },
         "minecraft:hurt_on_condition": {
            "damage_conditions": [
               {
                  "cause": "lava",
                  "damage_per_tick": 4,
                  "filters": {
                     "operator": "==",
                     "subject": "self",
                     "test": "in_lava",
                     "value": true
                  }
               }
            ]
         },
         "minecraft:movement": { "value": 0.1 },
         "minecraft:underwater_movement": { "value": 0.15 },
         "minecraft:movement.sway": { "max_turn": 0, "sway_amplitude": 0 },
         "minecraft:navigation.generic": {
            "can_breach": true,
            "can_path_over_water": false,
            "can_swim": true,
            "can_walk": false,
            "is_amphibious": false
         },
         "minecraft:despawn": { "despawn_from_distance": { "max_distance": 128, "min_distance": 32 } },
         "minecraft:pushable": { "is_pushable": true, "is_pushable_by_piston": true },
         "minecraft:physics": {}
         //#endregion
      },
      "events": {
         "minecraft:entity_spawned": {
            "sequence": [
               {
                  "randomize": [
                     {
                        "add": {
                           "component_groups": [
                              "jellybig"
                           ]
                        },
                        "weight": 60
                     },
                     {
                        "add": {
                           "component_groups": [
                              "jelly"
                           ]
                        },
                        "weight": 80
                     },
                     {
                        "add": {
                           "component_groups": [
                              "jellysmall"
                           ]
                        },
                        "weight": 40
                     }
                  ]
               },
               {
                  "randomize": [
                     {
                        "add": {
                           "component_groups": [
                              "chironex_variant"
                           ]
                        },
                        "weight": 50
                     },
                     {
                        "add": {
                           "component_groups": [
                              "chrysaora_variant"
                           ]
                        },
                        "weight": 50
                     },
                     {
                        "add": {
                           "component_groups": [
                              "rhizostoma_variant"
                           ]
                        },
                        "weight": 50
                     },
                     {
                        "add": {
                           "component_groups": [
                              "cotylorhiza_variant"
                           ]
                        },
                        "weight": 50
                     }
                  ]
               },
               {
                  "randomize": [
                     {
                        "add": {
                           "component_groups": [
                              "aggressive"
                           ]
                        },
                        "weight": 40
                     },
                     {
                        "add": {
                           "component_groups": [
                              "harmless"
                           ]
                        },
                        "weight": 70
                     }
                  ]
               }
            ]
         }
      }
   }
}
